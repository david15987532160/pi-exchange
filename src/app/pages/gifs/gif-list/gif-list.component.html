<nz-spin nzSize="large" [nzSpinning]="isLoading" class="mt-3">
    <div class="gallery">
        <div *ngFor="let gifsInCol of gifsByCols$ | async" class="gallery__column">
            <a *ngFor="let gif of gifsInCol; trackBy: trackByFn"
               class="gallery__link"
               (click)="createTplModal(modalTitle, modalContent)">
                <figure class="gallery__thumb">
                    <img class="gallery__image" [src]="gif.images.original.url" [alt]="gif.username">
                    <figcaption class="gallery__caption">{{ gif.username }}</figcaption>
                </figure>

                <!-- Modal title -->
                <ng-template #modalTitle>
                    <span>{{ gif.title }}</span>
                </ng-template>
                <!-- Modal body -->
                <ng-template #modalContent>
                    <figure class="mb-0 gallery__thumb no-transform">
                        <img class="mb-3 gallery__image" [src]="gif.images.original.url" [alt]="gif.username">

                        <div class="d-flex justify-content-between">
                            <p *ngIf="gif.user?.profile_url">
                                Uploaded by:
                                <a target="_blank" [href]="gif.user?.profile_url">{{ gif.user.username }}</a>
                            </p>
                            <p>
                                Rating
                                <sup>
                                    <span
                                        nz-icon
                                        nzType="question-circle"
                                        nz-tooltip="Rating is based on MPAA-style system"
                                        class="fs-6 text-black-50 help-icon">
                                    </span>
                                </sup> :
                                <b>{{ gif.rating.toUpperCase() }}</b>
                            </p>
                        </div>

                        <a target="_blank" [href]="gif.url">View GIF on Giphy</a>
                    </figure>
                </ng-template>
            </a>
        </div>
    </div>
</nz-spin>
